# CURRENTLY PATCHED WITH:
#	Advanced Vanilla Buildings (AVB)
#	Gigastructural Engineering & More (GIGA)
#
#	If you have any other mods that you want to become compatible with Empires Expanded,
#	please let me know!
#

## OVERWRITTEN TRIGGERS ##

has_upgraded_capital = {
	if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_capital"
			OR = {
				has_building = building_resort_capital
				has_building = building_resort_major_capital
				#AVB
				has_building = building_avb_resort_capital_3
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_capital"
			OR = {
				has_building = building_slave_capital
				has_building = building_slave_major_capital
				#AVB
				has_building = building_avb_slave_capital_3
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_capital"
			OR = {
				has_building = building_hab_capital
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hab_capital_3
			}
		}
	}
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_hive_capital"
			OR = {
				has_building = building_hive_capital
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hive_capital_3
				has_building = building_avb_hive_capital_4
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_capital"
			OR = {
				has_building = building_machine_capital
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				# EMEX Start
				has_building = building_bok_capital_1
				has_building = building_bok_capital_2
				has_building = building_bok_capital_3
				# EMEX End
				#AVB
				has_building = building_avb_machine_capital_4
				has_building = building_avb_machine_capital_5
				has_building = building_avb_machine_capital_6
				#GIGA
				has_building = building_giga_elysium_host_machine_major_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_capital"
			OR = {
				has_building = building_capital
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
				#AVB
				has_building = building_avb_capital_4
				has_building = building_avb_capital_5
				has_building = building_avb_capital_6
				#GIGA
				has_building = building_giga_elysium_host_major_capital
			}
		}
	}
}

has_major_upgraded_capital = {
	if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				#AVB
				has_building = building_avb_resort_capital_3
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				#AVB
				has_building = building_avb_slave_capital_3
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_major_capital"
			OR = {
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hab_capital_3
			}
		}
	}
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hive_capital_3
				has_building = building_avb_hive_capital_4
				#GIGA
				has_building = building_giga_elysium_host_hive_major_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				# EMEX Start
				has_building = building_bok_capital_2
				has_building = building_bok_capital_3
				# EMEX End
				#AVB
				has_building = building_avb_machine_capital_4
				has_building = building_avb_machine_capital_5
				has_building = building_avb_machine_capital_6
				#GIGA
				has_building = building_giga_elysium_host_machine_major_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
				#AVB
				has_building = building_avb_capital_4
				has_building = building_avb_capital_5
				has_building = building_avb_capital_6
				#GIGA
				has_building = building_giga_elysium_host_major_capital
			}
		}
	}
}

has_fully_upgraded_capital = {
	if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				#AVB
				has_building = building_avb_resort_capital_3
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				#AVB
				has_building = building_avb_slave_capital_3
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_major_capital"
			OR = {
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hab_capital_3
			}
		}
	}
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				#AVB
				has_building = building_avb_hive_capital_3
				has_building = building_avb_hive_capital_4
				#GIGA
				has_building = building_giga_elysium_host_hive_major_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				has_building = building_bok_capital_3 # EMEX
				#AVB
				has_building = building_avb_machine_capital_4
				has_building = building_avb_machine_capital_5
				has_building = building_avb_machine_capital_6
				#GIGA
				has_building = building_giga_elysium_host_machine_major_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_system_capital"
			OR = {
				has_building = building_system_capital
				has_building = building_imperial_capital
				#AVB
				has_building = building_avb_capital_4
				has_building = building_avb_capital_5
				has_building = building_avb_capital_6
				#GIGA
				has_building = building_giga_elysium_host_major_capital
			}
		}
	}
}

can_do_advanced_gene_modding = {
	hidden_trigger = { exists = from }
	from = {
		OR = {
			has_tradition = tr_genetics_resequencing
			# EMEX begin
			AND = {
				has_valid_civic = civic_emex_gene_cult
				has_valid_civic = civic_emex_eugenics_program
			}
			# EMEX end
		}
	}
}

can_remove_beneficial_genetic_traits = {
	hidden_trigger = { exists = from }
	from = {
		OR = {
			has_tradition = tr_genetics_resequencing
			# EMEX begin
			AND = {
				has_valid_civic = civic_emex_gene_cult
				has_valid_civic = civic_emex_eugenics_program
			}
			# EMEX end
		}
	}
}

is_special_colony_type = {
	OR = {
		has_modifier = penal_colony
		has_modifier = resort_colony
		has_modifier = slave_colony
		# EMEX begin
		has_modifier = emex_fracking_colony
		has_modifier = emex_cultivating_colony
		# EMEX end
	}
}